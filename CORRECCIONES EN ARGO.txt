PARA CORREGIR EN ARGO YA QUE NO ARRANCA CORRECTAMENTE!


Para lo que vos querés ahora —“hacer arrancar el soft y empezar a usarlo”— lo único que importa es esto:

1. Trabajar sobre la versión correcta

   * Usá solo la carpeta de `ARGO_v9_FIXED_FINAL` como base.
   * Ignorá r1 y r2 para el código principal.

2. Hacer SOLO dos cambios en el código

A) Arreglar `RouterConfig`
Archivo: `core/model_router.py`

Buscá donde está `class RouterConfig:` y dejalo así:

```python
from dataclasses import dataclass

@dataclass
class RouterConfig:
    """Configuración del router"""
    pricing: Dict[str, Any]
    budget: Dict[str, float]
    defaults: Dict[str, Any]
    
    @classmethod
    def from_file(cls, config_path: Path):
        """Carga configuración desde archivo JSON"""
        with open(config_path, 'r', encoding='utf-8') as f:
            data = json.load(f)
        
        return cls(
            pricing=data.get('pricing', {}),
            budget=data.get('budget', {}),
            defaults=data.get('defaults', {})
        )
```

B) Arreglar `_init_model_router`
Archivo: `core/bootstrap.py`

En el método `_init_model_router` borrá el cuerpo actual y poné algo así:

```python
from core.model_router import ModelRouter, RouterConfig
from core.llm_provider import LLMProviderManager

def _init_model_router(self) -> ModelRouter:
    # 1. API keys
    openai_key = os.getenv("OPENAI_API_KEY")
    anthropic_key = os.getenv("ANTHROPIC_API_KEY")

    if not openai_key:
        raise ValueError("OPENAI_API_KEY required in .env")

    # 2. Provider manager
    provider_manager = LLMProviderManager(
        openai_api_key=openai_key,
        anthropic_api_key=anthropic_key,
        config=self.config
    )

    # 3. Config del router desde settings.yaml
    router_config = RouterConfig(
        pricing=self.config.get("budget.pricing", {}),
        budget=self.config.get("budget", {}),
        defaults={
            "task_types": self.config.get("model_router.task_routing", {}),
            "dual_mode": self.config.get("model_router.dual_mode", {})
        }
    )

    # 4. Crear router
    router = ModelRouter(
        providers=provider_manager.providers,
        config=router_config,
        db_manager=self.unified_db
    )

    logger.debug(
        "Model Router inicializado",
        providers=list(provider_manager.providers.keys()),
        has_anthropic=bool(anthropic_key)
    )

    return router
```

Con eso atacás el problema que impedía arrancar bien el router.

3. Después de esos dos cambios

Paso a paso:

* Activar venv.
* `pip install -r requirements.txt`
* `python verify_fixed.py`
* `streamlit run app/ui.py`

Si después de esto te tira un traceback nuevo, lo copiás y lo vemos.
Pero para “arrancar y usarlo”, lo urgente es solo A + B. El resto del documento técnico es “para irlo transformando en Fórmula 1” más adelante, cuando ya lo tengas corriendo.
